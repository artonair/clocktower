// Minified using Javascript Aggregator - see /sites/default/files/js/js_3470446f0ef393ce8e7408ea07a5a110.js for original source including licensing information.

function FC_RenderNoLogin(){var img_url=Drupal.settings.friendconnect['parent_url']+'unknown.png';var image=['<img align="left" src="',img_url,'"></img>'].join('');var name='&nbsp;&nbsp;'+Drupal.t('Hi Visitor');var code=['Drupal.settings.friendconnect[\'user_login_click\'] = 1;','google.friendconnect.requestSignIn();'].join('');var login=['&nbsp;&nbsp;','<a href="javascript:',code,'">',Drupal.t('Login'),'</a>'].join('');$('#friendconnect_display').html([image,name,'<br/>',login].join(''));};function FC_RenderNoLogin_Fancy(){var code='Drupal.settings.friendconnect[\'user_login_click\'] = 1;';code+='google.friendconnect.requestSignIn();';google.friendconnect.renderSignInButton({id:'friendconnect_display',text:'Join this site',style:'long'});$('#friendconnect_display').html(['<div onclick="javascript:',code,'"',$('#friendconnect_display').html(),'</div>'].join(''));};function FC_RenderFirstLogin(id,name,image){var joiner=/\?/.test(Drupal.settings.friendconnect['join_url'])?'&':'?';window.location=[Drupal.settings.friendconnect['join_url'],joiner,'fcname=',name,'&fcid=',id,'&fcimage=',image,'&fcto=',Drupal.settings.friendconnect['current_url']].join('');};function FC_RenderConnectLogin(id,name,image){var image_link='<img align="left" src="'+image+'"></img>';var greeting='&nbsp;&nbsp;'+Drupal.t('Hi @name !',{'@name':name});var code=['FC_RenderFirstLogin(\'',id,'\', \'',name,'\', \'',image,'\');'].join('');var connect=['&nbsp;&nbsp;','<a href="javascript:',code,'">',Drupal.t('Quick Connect'),'</a>'].join('');var code='google.friendconnect.requestSettings();';var settings=['&nbsp;&nbsp;','<a href="javascript:',code,'">',Drupal.t('Settings'),'</a>'].join('');var code='google.friendconnect.requestSignOut();';var logout=['&nbsp;','<a href="javascript:',code,'">',Drupal.t('Logout'),'</a>'].join('');$('#friendconnect_display').innerHTML=[image_link,greeting,'<br/>',connect,'<br/>',settings,',',logout].join('');};function FC_RenderConnectLogin_Fancy(id,name,image){var code=['FC_RenderFirstLogin(\'',id,'\', \'',name,'\', \'',image,'\');'].join('');google.friendconnect.renderSignInButton({id:'friendconnect_display',text:'Join this site',style:'long'});$('#friendconnect_display').html(['<div onclick="javascript:',code,'"',$('#friendconnect_display').html(),'</div>'].join(''));};function FC_RenderBadLogin(id,name,image){$('#friendconnect_display').parent().hide();};function FC_RenderGoodLogin(id,name,image){var image_link=['<img align="left" src="',image,'"></img>'].join('');var greeting=['&nbsp;&nbsp;',Drupal.t('Hi @name !',{'@name':name})].join('');var code='google.friendconnect.requestInvite();';var invite=['&nbsp;&nbsp;','<a href="javascript:',code,'">',Drupal.t('Invite Friends'),'</a>'].join('');var code='google.friendconnect.requestSettings();';var settings=['&nbsp;&nbsp;','<a href="javascript:',code,'">',Drupal.t('Settings'),'</a>'].join('');var code='google.friendconnect.requestSignOut(); return true;';var logout=['&nbsp;','<a href="',Drupal.settings.friendconnect['logout_url'],'" onclick="javascript:',code,'">',Drupal.t('Logout'),'</a>'].join('');$('#friendconnect_display').html([image_link,greeting,'<br>',invite,'<br>',settings,',',logout].join(''));};function FC_RenderFriendConnect(data){var viewer=data.get('viewer').getData();if(!viewer){FC_RenderNoLogin_Fancy();return;}
var id=viewer.getField('id');var name=viewer.getField('displayName');var image=viewer.getField('thumbnailUrl');if(Drupal.settings.friendconnect['user_login_click']==1){FC_RenderFirstLogin(id,name,image);return;}
if(Drupal.settings.friendconnect['current_uid']=='0'){FC_RenderConnectLogin_Fancy(id,name,image);return;}
if(Drupal.settings.friendconnect['current_fcid']!=id){FC_RenderBadLogin(id,name,image);return;}
FC_RenderGoodLogin(id,name,image);};function FC_GetFriendConnect(securityToken){var req=opensocial.newDataRequest();var params={};params[opensocial.DataRequest.PeopleRequestFields.PROFILE_DETAILS]=[opensocial.Person.Field.ID,opensocial.Person.Field.NAME,opensocial.Person.Field.THUMBNAIL_URL];req.add(req.newFetchPersonRequest('VIEWER',params),'viewer');req.send(FC_RenderFriendConnect);};function FC_LoadFriendConnect(){FC_Fix_logout();if(!$('#friendconnect_display').size()){return;}
Drupal.settings.friendconnect['user_login_click']=0;google.friendconnect.container.setParentUrl(Drupal.settings.friendconnect['parent_url']);google.friendconnect.container.initOpenSocialApi({site:Drupal.settings.friendconnect['site_id'],onload:function(securityToken){FC_GetFriendConnect(securityToken);}});};function FC_Fix_logout(){$('a').each(function(){if($(this).attr('href')==Drupal.settings.friendconnect['logout_url']){$(this).attr('href','#');$(this).click(function(){google.friendconnect.requestSignOut();window.location.href=Drupal.settings.friendconnect['logout_url'];});}});};;